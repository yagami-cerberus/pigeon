<div class="form-group">
  <%= f.label :title, 'Title', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.text_field :title, :class => 'form-control input-sm' %>
  </div>
</div>
<div class="form-group">
  <%= f.label :code, 'Code', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.text_field :code, :class => 'form-control input-sm' %>
  </div>
</div>
<div class="form-group">
  <%= f.label :unit, 'Unit', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.text_field :unit, :class => 'form-control input-sm' %>
  </div>
</div>
<div class="form-group">
  <%= f.label :order_index, 'Order Index', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.number_field :order_index, :class => 'form-control input-sm' %>
  </div>
</div>
<div class="form-group">
  <%= f.label :program_code, 'Program Code', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.text_field :program_code, :class => 'form-control input-sm' %>
  </div>
</div>
<hr />
<div class="form-group">
  <%= f.label :data_type, 'Data Type', class: 'col-sm-2 control-label' %>
  <div class="col-sm-4">
    <%= f.select :data_type, InspectionAtom.type_manager.map {|name, _| [name, name] }, {}, :class => 'form-control input-sm data-type-selector' %>
  </div>
</div>
<div data-form="type-handler">
  <%= f.fields_for(:type_handler, @type_handler) do |type_handler_f| %>
    <%= inspection_type_editor type_handler_f, type_handler_f.object %>
  <% end %>
</div>

<script type="text/javascript">
$(function() {
  $(".data-type-selector").bind("change", function() {
    $("[data-form=type-handler]")
      .html('<div class="form-group"><div class="col-sm-10 col-sm-offset-2">Loading...</div></div>')
      .load('<%= settings_inspection_type_template_url %>?name=' + $(this).val());
    
  });
});
</script>